# Copyright 2020 - 2021 PeopleWare n.v.
#
# Licensed under the Apache License, Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#
#     http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.

allOf:
  - $ref: 'Versioned.yaml'
  - type: object
    required:
      - createdAt
      - createdBy
    properties:
      structureVersion:
        type: integer
        minimum: 0
        description: Version of the data structure of this resource type
        example: 4
      createdAt:
        allOf:
          - readOnly: true
            description: >-
              SoT of the resource action that `put`ed or `post`ed this item version, as ISO-8601 expressed in UTC ('Z'),
              to ms precision.
          - $ref: '../time/DateTime.yaml'
      createdBy:
        type: string
        format: urlsegment
        pattern: '^[\w-.~%!$&''()*+,;=]+$'
        readOnly: true
        description: >-
          Opaque id of the account that executed the resource action that `put`ed or `post`ed this item version.

          In a later version, we envisage access by, e.g., HR staff of employers to the system, and we then need to be
          able to only show data provided by that employer. This might apply to other organisations to at a later stage.

          For manual interactions, the account refers to one specific natural person. The above implies that we have to
          be able to know from the value of this field as precise as possible to which organisation that natural person
          belongs. When we automatically proces data input files received from employers, we need to make sure that we
          use a different account per data source (i.e., per employer in the example), and not one general account
          representing the overal import process.
        example: y7_56b.953WP9
